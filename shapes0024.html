<!DOCTYPE html>
<html>
<head>
</head>
<body>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
 
//set up window size
var width = window.innerWidth,
    height = window.innerHeight,
    smallDim = Math.min(width, height),

    // 2d array of possible values for each NT
    nucleoArray = [
        {"initKey": "A", "name": "Adenine", "color": "yellow"}, 
        {"initKey": "U", "name": "Uracil", "color": "blue"}, 
        {"initKey": "G", "name": "Guanine", "color": "red"}, 
        {"initKey": "C", "name": "Cytosine", "color": "green"}, 
        {"initKey": "R", "name": "puRine", "color": "orange"}, 
        {"initKey": "Y", "name": "pYrimidine", "color": "turquoise"}, 
        {"initKey": "N", "name": "unkNown", "color": "gray"}, 
        {"initKey": "X", "name": "X null", "color": "white"}],

    // set up an initial sequence
    initialNTArray = ["A", "A", "A", "A", "A", "A",  "A", "A"];

// turn array into nest
var nucleoNest = d3.nest()
    .key(function(d) {return d.initKey})
    .entries(nucleoArray);

// select the html body, put origin in center of window
var svg = d3.select("body")
	.append("svg")
    	.attr("width", width)
    	.attr("height", height)
	.append("g")
    	.attr("transform", "translate(" + (width / 2) + "," + (height / 2) + ")");

// pass in string of 'A's into the function, display them as dots in a circle
function update(dataArray)  {
    //set up vars for proportional positions
    var segment = Math.PI * 2 / dataArray.length,
        hypotenuse = smallDim * 1 / 5,
        radius = segment * hypotenuse / 3;


    svg.selectAll("circle")
        .data(dataArray)   
        .enter() // begin to add stuff
        .append("circle") // draw a dot for each nucleotide
        .attr("cy", function(d, i) {return Math.sin(segment * -i + 11/16 * 2 * Math.PI) * hypotenuse; })
        .attr("cx", function(d, i) {return Math.cos(segment * -i + 11/16 * 2 * Math.PI) * hypotenuse; })
        .attr("r", radius)
        // fill color is the hsl value depending on number of circles
        .style("fill", function(d, i) {return "hsl(" + i / dataArray.length * 360 + ",100%,50%)"});
        
        // add gray outline on mouseover
        .on("mouseover", function(){d3.select(this)
            .style("stroke", "gray")
            .style("stroke-width", 4);})
        // remove gray outline when not mouseover
        .on("mouseout", function(){d3.select(this)
            .style("stroke", "gray")
            .style("stroke-width", 0);})
        // click to scroll through options
        //.on("click", //scroll}

update(initialNTArray);

</script>
</body>
</html>